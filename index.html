<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUEERZ! Player Companion</title>
    <link rel="stylesheet" href="styles-player.css">
</head>
<body>
    <!-- Header with Sync Badge -->
    <header>
        <h1>QUEERZ! Player Companion</h1>
        <div id="sync-status-badge">○ Offline</div>
    </header>

    <!-- Main Container -->
    <div class="container">
        
        <!-- Scene Display (Firebase Sync) -->
        <section class="scene-broadcast">
            <h2 id="current-scene-title">Waiting for MC...</h2>
            <img id="location-image" class="location-image" style="display: none;" alt="Location">
            <div id="current-music-display" class="music-display">♪ No music playing</div>
        </section>

        <!-- Character Loading -->
        <section class="character-section">
            <button id="load-character-btn" class="btn-primary">Load Character</button>
            <input type="file" id="character-file-input" accept=".json" style="display: none;">
            
            <div class="character-display">
                <img id="characterPortrait" class="character-portrait" style="display: none;" alt="Character Portrait">
                <h2 id="characterName">No Character Loaded</h2>
                <p id="characterPronouns" class="pronouns">they/them</p>
            </div>
        </section>

        <!-- Stats Display -->
        <section class="stats-section">
            <div class="stat-box">
                <span class="stat-label">Juice</span>
                <span id="juiceCount" class="stat-value">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">Power</span>
                <span id="totalPower" class="stat-value">+0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">Roll</span>
                <span id="rollResult" class="stat-value">—</span>
            </div>
        </section>

        <!-- Power Tags -->
        <section class="tags-section">
            <h3>Power Tags (Click to Burn for +1 Power)</h3>
            <div id="power-tags-container" class="tags-container">
                <p class="empty-message">Load a character to see power tags</p>
            </div>
        </section>

        <!-- Weakness Tags -->
        <section class="tags-section">
            <h3>Weakness Tags (Click to Burn for -1 Power)</h3>
            <div id="weakness-tags-container" class="tags-container">
                <p class="empty-message">Load a character to see weakness tags</p>
            </div>
        </section>

        <!-- Tag Recovery -->
        <section class="actions-section">
            <button id="recover-tags-btn" class="btn-secondary">Recover All Burnt Tags</button>
        </section>

        <!-- Tag Combos System -->
        <section class="combos-section">
            <h3>Create Tag Combo</h3>
            <div class="combo-creator">
                <div id="combo-tags-container" class="combo-tags-selector">
                    <p class="empty-message">Load a character to create combos</p>
                </div>
                <div class="combo-inputs">
                    <input type="text" id="combo-name-input" placeholder="Combo Name (e.g., 'Tech Savvy Flirt')" class="combo-input">
                    <input type="number" id="combo-power-input" placeholder="Bonus Power" min="0" max="5" value="0" class="combo-input">
                    <button id="add-combo-btn" class="btn-primary">Add Combo</button>
                </div>
            </div>
            
            <h4>Active Combos</h4>
            <div id="active-combos-container" class="active-combos">
                <p class="empty-message">No active combos yet</p>
            </div>
        </section>

        <!-- Core Moves Toggle -->
        <section class="moves-section">
            <button id="toggle-moves-btn" class="btn-toggle">Show Core Moves</button>
            <div id="core-moves-panel" class="core-moves-panel" style="display: none;">
                <h3>QUEERZ! Core Moves Reference</h3>
                
                <div class="move">
                    <h4>READ A PERSON</h4>
                    <p class="move-trigger"><strong>When you try to understand someone's emotions or motives</strong>, roll+Power.</p>
                    <ul class="move-outcomes">
                        <li><strong>10+:</strong> Ask the MC 3 questions from the list below</li>
                        <li><strong>7-9:</strong> Ask the MC 1 question from the list</li>
                        <li><strong>6-:</strong> The MC tells you what they want you to think</li>
                    </ul>
                    <p class="move-questions"><em>Questions: What are you really feeling? What do you want from me? What are you hiding? How could I get you to ___?</em></p>
                </div>

                <div class="move">
                    <h4>TURN SOMEONE ON</h4>
                    <p class="move-trigger"><strong>When you try to seduce, manipulate, or provoke someone</strong>, roll+Power.</p>
                    <ul class="move-outcomes">
                        <li><strong>10+:</strong> They choose: do what you want, or the MC gives them a Condition</li>
                        <li><strong>7-9:</strong> Same, but you must promise something or give them a String on you</li>
                        <li><strong>6-:</strong> They can give you a Condition or take a String on you</li>
                    </ul>
                </div>

                <div class="move">
                    <h4>SHUT SOMEONE DOWN</h4>
                    <p class="move-trigger"><strong>When you dismiss, embarrass, or physically hurt someone</strong>, roll+Power.</p>
                    <ul class="move-outcomes">
                        <li><strong>10+:</strong> Choose 2 from the list below</li>
                        <li><strong>7-9:</strong> Choose 1 from the list</li>
                        <li><strong>6-:</strong> They choose 1 against you instead</li>
                    </ul>
                    <p class="move-questions"><em>Options: Gain a String on them, hurt them (inflict Condition), make them leave the scene, they can't use moves on you this scene</em></p>
                </div>

                <div class="move">
                    <h4>HOLD STEADY</h4>
                    <p class="move-trigger"><strong>When you face fear, stress, or overwhelming emotion</strong>, roll+Power.</p>
                    <ul class="move-outcomes">
                        <li><strong>10+:</strong> You're good - act with confidence</li>
                        <li><strong>7-9:</strong> The MC chooses: take a Condition, flee the scene, freeze up, or lash out</li>
                        <li><strong>6-:</strong> The MC makes a hard move</li>
                    </ul>
                </div>

                <div class="move">
                    <h4>LASH OUT PHYSICALLY</h4>
                    <p class="move-trigger"><strong>When you attack someone with violence</strong>, roll+Power.</p>
                    <ul class="move-outcomes">
                        <li><strong>10+:</strong> Inflict harm and choose 1 from your list</li>
                        <li><strong>7-9:</strong> Inflict harm but the MC chooses 1 from their list</li>
                        <li><strong>6-:</strong> You're outmatched - the MC makes a move</li>
                    </ul>
                    <p class="move-questions"><em>Your choices: Extra harm, don't take harm back, gain a String. MC choices: You take harm, you get a Condition, you lose a String, you end up in a terrible position</em></p>
                </div>

                <div class="move">
                    <h4>RUN AWAY</h4>
                    <p class="move-trigger"><strong>When you flee from danger or conflict</strong>, roll+Power.</p>
                    <ul class="move-outcomes">
                        <li><strong>10+:</strong> You get away clean</li>
                        <li><strong>7-9:</strong> Choose one: take a Condition, leave something important behind, or end up somewhere worse</li>
                        <li><strong>6-:</strong> The MC makes a move</li>
                    </ul>
                </div>

                <div class="move">
                    <h4>GAZE INTO THE ABYSS</h4>
                    <p class="move-trigger"><strong>When you face cosmic horror, supernatural mystery, or the darkest truth</strong>, roll+Power.</p>
                    <ul class="move-outcomes">
                        <li><strong>10+:</strong> The MC tells you the truth, and you choose: gain a String on someone involved, avoid a Condition, or ask a follow-up question</li>
                        <li><strong>7-9:</strong> The MC tells you the truth, but gives you a Condition</li>
                        <li><strong>6-:</strong> The truth is worse than you imagined - take -1 ongoing until you process it</li>
                    </ul>
                </div>
            </div>
        </section>

    </div>

    <!-- Scripts - MUST be in this order! -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="player-app.js"></script>
</body>
</html>